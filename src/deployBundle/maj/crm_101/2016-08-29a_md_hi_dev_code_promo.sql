CREATE TABLE code_promo (id INT UNSIGNED AUTO_INCREMENT NOT NULL, libelle VARCHAR(255) NOT NULL, code VARCHAR(255) NOT NULL, client_affectation SMALLINT NOT NULL, type_remise SMALLINT NOT NULL, valeur_remise NUMERIC(10, 2) NOT NULL, prix_mini NUMERIC(10, 2) NOT NULL, `usage` SMALLINT NOT NULL, actif TINYINT(1) NOT NULL, UNIQUE INDEX UNIQ_5C4683B777153098 (code), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE code_promo_code_promo_periode_validite (code_promo_id INT UNSIGNED NOT NULL, code_promo_periode_validite_id INT UNSIGNED NOT NULL, INDEX IDX_A7988F35294102D4 (code_promo_id), UNIQUE INDEX UNIQ_A7988F35E112517C (code_promo_periode_validite_id), PRIMARY KEY(code_promo_id, code_promo_periode_validite_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE code_promo_periode_validite (id INT UNSIGNED AUTO_INCREMENT NOT NULL, date_debut DATETIME NOT NULL, date_fin DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE code_promo_code_promo_periode_validite ADD CONSTRAINT FK_A7988F35294102D4 FOREIGN KEY (code_promo_id) REFERENCES code_promo (id) ON DELETE CASCADE;
ALTER TABLE code_promo_code_promo_periode_validite ADD CONSTRAINT FK_A7988F35E112517C FOREIGN KEY (code_promo_periode_validite_id) REFERENCES code_promo_periode_validite (id);