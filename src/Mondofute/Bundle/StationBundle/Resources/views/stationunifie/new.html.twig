{% extends '@MondofuteStation/stationunifie/fiche.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    {{ form_stylesheet(form) }}
{% endblock %}

{% form_theme form 'bootstrap_3_horizontal_layout.html.twig' %}
{% block title %}
    {{ 'création d\une station' | capitalize }}
{% endblock %}

{% block titre %}
    Création d'une station
{% endblock %}

{% block formulaire %}
    {% include '::flashbags.html.twig' %}

    {{ form_errors(form) }}
    {{ form_start(form) }}
    {% include '::coches_sites.html.twig' %}

    {% set mesSites = form.stations %}
    {% include '::onglets_sites.html.twig' %}

    <div class="tab-content" style="padding:20px;">
        {% set iSite = 0 %}
        {% set index = 0 %}
        {% for station in form.stations %}
            <div id="data_site_{{ station.vars.value.site.id }}"
                 class="{% if(iSite==0) %}active{% set iSite = 1 %}{% endif %} tab-pane fade in">
                {#{{ form_row(station.enneige) }}#}
                {{ form_row(station.site) }}
                <ul class="nav nav-tabs">
                    {#<div class="form-group">#}
                    {#{{ form_label( station.zoneTouristique ) }}#}
                    {#<div class="col-sm-10">#}
                    {#<select class="form-control"#}
                    {#name="station_unifie[stations][{{ index }}][zoneTouristique]"#}
                    {#id="station_unifie_stations_{{ index }}_zoneTouristique">#}
                    {#<option value="">{{ station.zoneTouristique.vars.placeholder }}</option>#}
                    {#{% for choice in station.zoneTouristique.vars.choices %}#}
                    {#{% if choice.data.site == station.vars.value.site %}#}
                    {#<option value="{{ choice.value }}">{{ choice.label }}</option>#}
                    {#{% endif %}#}
                    {#{% endfor %}#}
                    {#</select>#}
                    {#</div>#}
                    {#</div>#}
                    {{ form_row( station.zoneTouristique ) }}
                    {#{{ dump(station.zoneTouristique) }}#}
                    {{ form_row( station.codePostal ) }}
                    {{ form_row( station.lienMeteo ) }}
                    {{ form_row( station.jourOuverture ) }}
                    {{ form_row( station.moisOuverture ) }}
                    {{ form_row( station.jourFermeture ) }}
                    {{ form_row( station.moisFermeture ) }}
                    {% set iTraduc = 0 %}
                    {% for traduction in station.traductions %}
                        <li {% if(iTraduc==0) %}class="active"{% set iTraduc = 1 %}{% endif %}>
                            <a data-toggle="tab"
                               href="#{{ station.vars.value.site.id }}_{{ traduction.vars.value.langue.id }}">
                                {# affiche la langue en fonction de la locale#}
                                {% for traductionLangue in  traduction.vars.value.langue.traductions %}
                                    {% if(traductionLangue.langueTraduction.code == app.request.locale) %}
                                        {{ traductionLangue.libelle }}
                                    {% endif %}
                                {% endfor %}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
                <div class="tab-content">
                    {% set iTraduc = 0 %}
                    {% for traduction in station.traductions %}
                        <div id="{{ station.vars.value.site.id }}_{{ traduction.vars.value.langue.id }}"
                             class="{% if(iTraduc==0) %}active{% set iTraduc = 1 %}{% endif %} tab-pane fade in">
                            {{ form_widget(traduction) }}
                            {{ form_errors(traduction) }}
                        </div>
                    {% endfor %}
                </div>
            </div>

            {% set index = (index + 1) %}
        {% endfor %}
    </div>
    {{ form_row(form.submit) }}
    {{ form_row(form._token) }}
    {{ form_end(form, {'render_rest': false}) }}
{% endblock %}

{#  BLOCK DES ACTIONS AUTRES QUE LA MISE A JOUR#}
{% block actions %}
    <div style="text-align: right">
        <ul class="list-unstyled">
            <li><a href="{{ path('station_station_index') }}">{{ 'retour à la liste' | capitalize }}</a></li>
        </ul>

    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ form_javascript(form) }}
{% endblock %}

