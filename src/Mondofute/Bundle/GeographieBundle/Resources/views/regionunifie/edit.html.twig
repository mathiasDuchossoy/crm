{% extends '@MondofuteGeographie/regionunifie/fiche.html.twig' %}

{#{% block body %}#}
    {% form_theme edit_form 'bootstrap_3_horizontal_layout.html.twig' %}
    {% form_theme delete_form 'bootstrap_3_horizontal_layout.html.twig' %}
    {% block titre %}
        Modification de la r√©gion
    {% endblock %}
{% block formulaire %}
    {% form_theme edit_form 'bootstrap_3_horizontal_layout.html.twig' %}
    {% form_theme delete_form  'bootstrap_3_horizontal_layout.html.twig' %}

    {{ form_errors(edit_form) }}
    {{ form_start(edit_form) }}
    {% for site in sites %}
        <input id="siteAEnregistrer_{{ site.id }}" data-site-id="{{ site.id }}" type="checkbox" name="sites[]"
               value="{{ site.id }}">{{ site.libelle }}
    {% endfor %}

    {% set region = edit_form.regions | first %}
    {#<div>#}
    {#{{ form_row( region.nbVache ) }}#}
    {#{{ form_row( region.nbHabitant ) }}#}
    {#</div>#}
    <ul class="nav nav-tabs">
        {% set iSite = 0 %}
        {% for region in edit_form.regions %}
            <li id="menu_region_site_{{ region.vars.value.site.id }}"
                {% if(iSite==0) %}class="active"{% set iSite = 1 %}{% endif %}>
                <a data-toggle="tab"
                   href="#region_site_{{ region.vars.value.site.id }}">
                    {{ region.vars.value.site.libelle }}
                </a>
            </li>
        {% endfor %}
    </ul>

    <div class="tab-content" style="padding:20px;">

        {% set iSite = 0 %}
        {% for region in edit_form.regions %}
            <div id="region_site_{{ region.vars.value.site.id }}"
                 class="{% if(iSite==0) %}active{% set iSite = 1 %}{% endif %} tab-pane fade in">
                {#<div>#}
                {#{{ form_row(region.nbVache) }}#}
                {#{{ form_row(region.nbHabitant) }}#}
                {#</div>#}
                {{ form_row(region.site) }}
                <ul class="nav nav-tabs">
                    {% set iTraduc = 0 %}
                    {#{% for traduction in region.traductions %}#}
                    {#{% set langues[] = traduction %}#}
                    {#{% endfor %}#}
                    {#{{ dump(langues) }}#}
                    {% for traduction in region.traductions %}
                        <li {% if(iTraduc==0) %}class="active"{% set iTraduc = 1 %}{% endif %}>
                            <a data-toggle="tab"
                               href="#{{ region.vars.value.site.id }}_{{ traduction.vars.value.langue.id }}">
                                {% for traductionLangue in  traduction.vars.value.langue.traductions %}
                                    {% if(traductionLangue.langueTraduction.code == app.request.locale) %}
                                        {{ traductionLangue.libelle }}
                                    {% endif %}
                                {% endfor %}
                            </a>
                        </li>
                        {#{{ form_row(traduction) }}#}
                    {% endfor %}
                </ul>
                <div class="tab-content">
                    {% set iTraduc = 0 %}
                    {% for traduction in region.traductions %}
                        <div id="{{ region.vars.value.site.id }}_{{ traduction.vars.value.langue.id }}"
                             class="{% if(iTraduc==0) %}active{% set iTraduc = 1 %}{% endif %} tab-pane fade in">
                            {{ form_row(traduction) }}
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>
    {{ form_row(edit_form.submit) }}
    {{ form_row(edit_form._token) }}
    {{ form_end(edit_form, {'render_rest': false}) }}
{% endblock %}
    {#<h1>RegionUnifie edit</h1>#}

    {#{{ form_start(edit_form) }}#}
    {#{{ form_widget(edit_form) }}#}
    {#<input type="submit" value="Edit"/>#}
    {#{{ form_end(edit_form) }}#}

    {#<ul>#}
        {#<li>#}
            {#<a href="{{ path('geographie_region_index') }}">Back to the list</a>#}
        {#</li>#}
        {#<li>#}
            {#{{ form_start(delete_form) }}#}
            {#<input type="submit" value="Delete">#}
            {#{{ form_end(delete_form) }}#}
        {#</li>#}
    {#</ul>#}
{#{% endblock %}#}
